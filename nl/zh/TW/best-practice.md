---

copyright:
  years: 2017, 2018
lastupdated: "2018-12-04"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}
{:tip: .tip}
{:note: .note}

# 構成良好應用程式的要點？
{: #best-practice}

在 {{site.data.keyword.cloud}} 中建置應用程式，以充分運用雲端提供的所有內容。這些最佳作法可協助您確保應用程式具有雲端功能。
{: shortdesc}

## 建置與拓蹼無關的應用程式

在非雲端環境中，您的應用程式可能會使用特定部署拓蹼。不過，雲端應用程式中的應用程式拓蹼可能會變更，因為具有雲端功能的應用程式及服務容許立即進行可擴充性變更。這些變更包括動態擴充及手動重新調整應用程式的實例數量。

盡可能將應用程式建置為通用且無狀態，以避免應用程式受到可擴充性變更的影響。

## 假設本端檔案系統不是永久性

因為可以在雲端上移動、刪除或複製應用程式實例，所以請不要依賴寫入至檔案系統的檔案。如果應用程式使用本端檔案系統作為常用資訊（包括應用程式日誌）的快取，則當實例關閉並在不同的位置或不同的 VM 重新啟動時，資訊便會遺失。

您可以將資訊儲存至服務（例如 SQL 或 NoSQL 資料庫），而不要儲存在本端檔案系統。在動態雲端環境中，讓日誌存在於存活時間比產生日誌的應用程式實例還要久的服務上，也很重要。

## 排除應用程式的階段作業狀態

系統狀態是由資料庫及共用儲存空間所定義，而非由每一個個別執行中應用程式實例所定義。任何種類的有狀態性都會限制應用程式的可延伸性。請嘗試將階段作業狀態儲存在伺服器上的集中位置，讓階段作業狀態的影響降到最低。

如果您無法完全刪除階段作業狀態，請將它推送到應用程式伺服器以外的高可用性儲存庫。儲存庫包括 IBM WebSphere eXtreme Scale、Redis 或 Memcached，或是外部資料庫。

## 使用外部服務登錄來解析服務端點

請不要假設應用程式所使用的服務已配置特定主機名稱或 IP 位址。因為可能在雲端環境中重新定位或重新產生服務，所以主機名稱及 IP 位址也可能會變更。

將環境特有相依關係擷取成一組內容檔，可以有所改善，但仍然不足。最佳作法是使用外部服務登錄來解析服務端點，或將整個遞送功能委派給具有虛擬名稱的服務匯流排或負載平衡器。

## 使用多地區架構建置應用程式
{: #multiregion}

您可以執行多個實例，以避免單一地區的關閉時間。若要提供更為強健的應用程式，請考慮使用多地區架構。

## 確定您正在監視應用程式
{: #monitoring}

{{site.data.keyword.cloud_notm}} 讓您可以使用服務（例如 [New Relic ![外部鏈結圖示](../icons/launch-glyph.svg)](http://newrelic.com/){: new_window}）輕鬆地監視應用程式。

## 利用支援選項
{: #support}

{{site.data.keyword.cloud_notm}} 付費定價方案提供若干不同的帳戶類型以及選用性的付費支援。不論帳戶的類型為何，如果您計劃讓應用程式在 {{site.data.keyword.cloud_notm}} 上進入正式作業，請考慮登記此選項。

不論是否使用付費支援，您都可以如[支援](/docs/get-support/howtogetsupport.html#getting-customer-support)所述取得協助，支援能對於無法預料的問題提供保險。

## 避免在應用程式中使用基礎架構 API

如果您在應用程式中依賴特定的基礎架構 API，則變更基礎架構會更具挑戰性，因為基礎架構 API 可能參照軟體堆疊中的許多不同層。

您可以改為依賴現有的開放程式碼或商業產品，並將 PaaS 解決方案保留在 PaaS 層，讓它們獨立在您的應用程式碼之外。

## 使用標準通訊協定

請不要使用需要額外配置的不知名通訊協定進行備援。

根據標準通訊協定的應用程式較具復原力，因為它們將配置項目委派給平台。標準通訊協定包括 HTTP、SSL、標準資料庫、佇列作業及 Web 服務連線。

## 使用相容性程式庫而不要使用 OS 特有的特性

如果您已使用 OS 特有的特性，則可以使用相容性程式庫（例如 Cygwin 及 Mono）來修正此問題。Cygwin 是一個相容性程式庫，可在 Windows 環境中提供一組 Linux 工具。Mono 是一個相容性程式庫，可在 Linux 中提供 Windows .NET 工具。

請避免 OS 特有的相依關係；請改用中介軟體基礎架構或服務提供者所提供的服務。

## 將您的安裝過程寫成 Script

您的應用程式可能會經常要視需求安裝在動態雲端環境上。安裝過程必須 Script 化且可靠，而且必須將配置資料與 Script 分開 (externalize)。

請將應用程式安裝擷取為一組統一且與作業系統無關的 Script。請維持應用程式安裝短小精幹並且可攜，以適合不同的自動化技術。此外，也請將應用程式安裝所需的相依關係減到最少。

如需具有雲端功能的應用程式相關資訊，請參閱 [The 12-factor app ![外部鏈結圖示](../icons/launch-glyph.svg)](http://12factor.net/){: new_window}。


